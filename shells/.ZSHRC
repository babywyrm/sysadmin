############################################
# ðŸ”¥ macOS Power Dev + CTF ZSH Config
############################################

############################################
# Performance & History Tweaks
############################################

DISABLE_AUTO_UPDATE="true"
DISABLE_UPDATE_PROMPT="true"
DISABLE_UNTRACKED_FILES_DIRTY="true"

setopt HIST_IGNORE_ALL_DUPS
setopt HIST_FIND_NO_DUPS

############################################
# Oh-My-Zsh (minimal)
############################################

export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME=""
plugins=(git)

source $ZSH/oh-my-zsh.sh

############################################
# Homebrew (Apple Silicon + Intel safe)
############################################

if [[ -d /opt/homebrew ]]; then
  eval "$(/opt/homebrew/bin/brew shellenv)"
elif [[ -d /usr/local/Homebrew ]]; then
  eval "$(/usr/local/bin/brew shellenv)"
fi

############################################
# PATH Management
############################################

export PATH="$HOME/.local/bin:$PATH"
export PATH="$HOME/.cargo/bin:$PATH"
export PATH="/usr/local/opt/libxml2/bin:$PATH"

############################################
# ðŸ Pyenv
############################################

export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"

if command -v pyenv >/dev/null 2>&1; then
  eval "$(pyenv init --path)"
  eval "$(pyenv init -)"
  eval "$(pyenv virtualenv-init -)"
fi

############################################
# âš¡ uv (Modern Python)
############################################

if command -v uv >/dev/null 2>&1; then
  export UV_PROJECT_ENVIRONMENT=1
fi

############################################
# â˜¸ Kubernetes
############################################

if command -v kubectl >/dev/null 2>&1; then
  alias k="kubectl"
  alias kgp="kubectl get pods"
  alias kgs="kubectl get svc"
  alias kgn="kubectl get nodes"
fi

if command -v kubectx >/dev/null 2>&1; then
  alias kx="kubectx"
  alias kn="kubens"
fi

############################################
# ðŸ›¡ï¸ macOS Networking Aliases
############################################

# macOS replacement for ss -tulpn
alias ports="sudo lsof -i -P -n"

# show listening only
alias listening="sudo lsof -nP -iTCP -sTCP:LISTEN"

# quick IP
alias myip="ipconfig getifaddr en0"

############################################
# ðŸ§ª CTF / Pentest Helpers
############################################

alias ll="ls -lah"
alias la="ls -A"
alias l="ls -CF"

alias httpserve="python3 -m http.server 8000"
alias ncl="nc -lvnp"
alias extract="tar -xvf"
alias grepip="grep -Eo '([0-9]{1,3}\.){3}[0-9]{1,3}'"

############################################
# ðŸš€ Starship (last)
############################################

if command -v starship >/dev/null 2>&1; then
  eval "$(starship init zsh)"
fi
